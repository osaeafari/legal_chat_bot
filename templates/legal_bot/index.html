{% extends 'layout/base.html' %}
{% load static %}

{% block content %}
<div class="container" id="chat-container">
    <!-- Initial landing view -->
    <div id="landing-view" class="fade-in px-4 py-5">
        <div class="text-center mb-4">
            <h1 class="gradient-text display-4 fw-bold">Hi there! <br> What legal help do you need?</h1>
            <p class="text-muted mt-2">Use one of the most common prompts below <br> or use your own to begin</p>
        </div>
        
        <div class="row g-4 mt-3 justify-content-center">
            <div class="col-12 col-md-6">
                <div class="card prompt-card border h-100 p-3" data-question="How do I apply for legal aid">
                    <div class="card-body d-flex flex-column p-0">
                        <h6 class="card-title mb-auto">How do I apply for legal aid</h6>
                        <div class="text-muted mt-3">
                            <i class="bi bi-book-half fs-4"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-12 col-md-6">
                <div class="card prompt-card border h-100 p-3" data-question="What are the legal requirements for starting a business?">
                    <div class="card-body d-flex flex-column p-0">
                        <h6 class="card-title mb-auto">What are the legal requirements for starting a business?</h6>
                        <div class="text-muted mt-3">
                            <i class="bi bi-briefcase fs-4"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-12 col-md-6">
                <div class="card prompt-card border h-100 p-3" data-question="What are my rights during a police stop?">
                    <div class="card-body d-flex flex-column p-0">
                        <h6 class="card-title mb-auto">What are my rights during a police stop?</h6>
                        <div class="text-muted mt-3">
                            <i class="bi bi-shield fs-4"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-12 col-md-6">
                <div class="card prompt-card border h-100 p-3" data-question="What are the steps to file for divorce?">
                    <div class="card-body d-flex flex-column p-0">
                        <h6 class="card-title mb-auto">What are the steps to file for divorce?</h6>
                        <div class="text-muted mt-3">
                            <i class="bi bi-file-earmark-text fs-4"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="d-flex align-items-center mt-4 text-muted justify-content-center" id="refresh-prompts" style="cursor: pointer;">
            <i class="bi bi-arrow-repeat me-2"></i> Refresh
        </div>
    </div>

    <!-- Conversation view (initially hidden) -->
    <div id="conversation-view" class="d-none vh-100">
        <div id="chat-messages" class="container p-4 overflow-auto" style="max-height: calc(100vh - 120px);">
            <!-- Messages will be added here dynamically -->
        </div>
    </div>

    <div class="container fixed-bottom pb-4 pt-2 bg-light">
        <form id="chat-form" class="row justify-content-center">
            {% csrf_token %}
            <div class="col-md-11">
                <div class="position-relative">
                    <textarea id="question" class="form-control py-2 pe-5" name="question" placeholder="Ask whatever you want...." maxlength="1000" rows="4"></textarea>
                    <div class="position-absolute bottom-0 end-0 p-2 d-flex align-items-center">
                        <small class="text-muted me-2 char-counter">0/1000</small>
                        <button type="submit" class="btn btn-primary rounded-square" style="width: 40px; height: 38px; background-color:blueviolet; border: none;">
                            <i class="bi bi-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}